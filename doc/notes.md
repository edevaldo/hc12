

# Assembler:
  Steps:
    - Read a source file into a linked list of text lines.
      - How to deal with includes?
      - How to deal with macros? Definition and expansion.
    Process each line:
      - Add symbols to the symbol table, define their values if possible
        - Line may have a lible or defice a symbol.
        - May hold a value
          - Location of a function, variable or hardware register
          - A numerical or string value that replaces the symbol
          - May still be undefined, but have relations with a previous symbol
        - Points to the definition in the sources. (File, line, row).
      - Compute opcodes and instruction size for the line (May contain multiple
        instructions per line separated by ';' ?).
          - May be completely defined on first pass or need to be processes after
            all symbols are known/defined.
      - Detects if it is a flow control instruction.
      - Compute number of cycles needed by instruction.
      - Needs to check if offsets to indices and branches are within the range
        the instruction can accept.
    
Have a data structure that:
typedef struct TextLine_t {
  TextLine_t nxt;             // Next line in file. Null if EOF.
  TextLine_t prev;            // Previous line in file. Null if first line.
  int line number;            // Line number in text file.
  int location_counter;       // Memory location (-1 if not known). May need two counters, paged and not paged.
  int bytes;                  // Bytes used by instruction. (Need to represent a range in some cases. How?)
  <struct> opcodes;           // Need to represent opcodes generated by this text line. May be empty, may contain multiple instructions.
  int cycles;                 // Cycles to execute
  TextLine_t brachesTo;       // If it is a branch where it may branch to.
  char* line;
}
- Maybe break the data structure in two types. One to contain only the text,
  like in a text editor. Another that implements the assembler data structure
  and points to the text line. Maybe other structures that represent instruction
  flow or support emulation, syntax highliting, etc.
- Need a symbol table hash structure. May need to store if the symbol is an
  address or not.
- How to represent instructions, their arguments, opcodes, cycles, sizes and
  effects(?) ?


# Parsing a line:

# Interesting Links:
[ELF Format Cheatsheet](https://gist.github.com/x0nu11byt3/bcb35c3de461e5fb66173071a2379779)
[How to embed Tcl in C applications](https://wiki.tcl-lang.org/page/How+to+embed+Tcl+in+C+applications)
[Adding Tcl/Tk to a C applications](https://wiki.tcl-lang.org/page/Adding+Tcl%2FTk+to+a+C+application)

# Links to check:
[Let's write a compiler, part 1: Introduction, selecting a language, and doing some planning](https://briancallahan.net/blog/20210814.html)
[Let's write a compiler, part 2: A lexer](https://briancallahan.net/blog/20210815.html)
[Let's write a compiler, part 3: A parser](https://briancallahan.net/blog/20210816.html)
[Let's write a compiler, part 4: Testing](https://briancallahan.net/blog/20210817.html)
[Let's write a compiler, part 5: A code generator](https://briancallahan.net/blog/20210818.html)
[Let's write a compiler, part 6: Input and output](https://briancallahan.net/blog/20210819.html)
[Let's write a compiler, part 7: Arrays](https://briancallahan.net/blog/20210822.html)
[Let's write a compiler, part 8: Strings, forward references, and conclusion](https://briancallahan.net/blog/20210826.html)
[Building a Parser from scratch. Lecture [1/18]: Tokenizer | Parser](https://www.youtube.com/watch?v=4m7ubrdbWQU)
[Building a Parser from scratch](https://www.youtube.com/playlist?list=PLGNbPb3dQJ_5FTPfFIg28UxuMpu7k0eT4)

# HSW12ASM:
[HSW12 Assembler Manual](https://hotwolf.github.io/HSW12/hsw12asm.html)
[HSW12](https://hotwolf.github.io/HSW12/)

# Stub Project:
[How SQLite Is Tested](https://sqlite.org/testing.html)
[An Introduction To The SQLite C/C++ Interface](https://www.sqlite.org/cintro.html)